{"ast":null,"code":"var _jsxFileName = \"/Users/xiaoyang/Desktop/TimelyAI/frontend/src/components/ChatDialog.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Input, Button, Card } from 'antd';\nimport axios from 'axios';\nimport './ChatDialog.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ChatDialog({\n  onDialogComplete\n}) {\n  _s();\n  const [messages, setMessages] = useState([]);\n  const [userInput, setUserInput] = useState('');\n  const [dialogueComplete, setDialogueComplete] = useState(false);\n  useEffect(() => {\n    // 添加初始欢迎消息\n    setMessages([{\n      type: 'assistant',\n      content: '你好！我是你的智能会议助手。我可以帮你：\\n1. 安排新的会议\\n2. 修改已有会议\\n3. 查询会议信息\\n请告诉我你需要什么帮助？'\n    }]);\n  }, []);\n  const sendMessage = async () => {\n    if (!userInput.trim()) return;\n    try {\n      // 添加用户消息\n      setMessages(prev => [...prev, {\n        type: 'user',\n        content: userInput\n      }]);\n\n      // 发送请求到后端\n      const response = await axios.post('/chat', {\n        message: userInput,\n        type: 'user_initiated'\n      });\n      if (response.data.status === 'success') {\n        // 添加助手回复\n        setMessages(prev => [...prev, {\n          type: 'assistant',\n          content: response.data.response\n        }]);\n\n        // 如果对话完成，通知父组件\n        if (response.data.dialogue_complete) {\n          setDialogueComplete(true);\n          onDialogComplete(response.data.summary);\n        }\n      }\n      setUserInput('');\n    } catch (error) {\n      console.error('发送消息失败:', error);\n      setMessages(prev => [...prev, {\n        type: 'system',\n        content: '抱歉，发生了错误。'\n      }]);\n    }\n  };\n  return /*#__PURE__*/_jsxDEV(Card, {\n    className: \"chat-dialog-container\",\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"chat-messages\",\n      children: messages.map((msg, index) => /*#__PURE__*/_jsxDEV(\"div\", {\n        className: `message ${msg.type}`,\n        children: msg.content\n      }, index, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 61,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"input-area\",\n      children: [/*#__PURE__*/_jsxDEV(Input, {\n        value: userInput,\n        onChange: e => setUserInput(e.target.value),\n        onPressEnter: sendMessage,\n        placeholder: \"\\u8BF7\\u8F93\\u5165\\u60A8\\u7684\\u6D88\\u606F...\",\n        disabled: dialogueComplete\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 69,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"primary\",\n        onClick: sendMessage,\n        disabled: dialogueComplete,\n        children: \"\\u53D1\\u9001\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 68,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 60,\n    columnNumber: 9\n  }, this);\n}\n_s(ChatDialog, \"g4pyVXxvC3+PuPwosHMoKDyi5eo=\");\n_c = ChatDialog;\nexport default ChatDialog;\nvar _c;\n$RefreshReg$(_c, \"ChatDialog\");","map":{"version":3,"names":["React","useState","useEffect","Input","Button","Card","axios","jsxDEV","_jsxDEV","ChatDialog","onDialogComplete","_s","messages","setMessages","userInput","setUserInput","dialogueComplete","setDialogueComplete","type","content","sendMessage","trim","prev","response","post","message","data","status","dialogue_complete","summary","error","console","className","children","map","msg","index","fileName","_jsxFileName","lineNumber","columnNumber","value","onChange","e","target","onPressEnter","placeholder","disabled","onClick","_c","$RefreshReg$"],"sources":["/Users/xiaoyang/Desktop/TimelyAI/frontend/src/components/ChatDialog.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Input, Button, Card } from 'antd';\nimport axios from 'axios';\nimport './ChatDialog.css';\n\nfunction ChatDialog({ onDialogComplete }) {\n    const [messages, setMessages] = useState([]);\n    const [userInput, setUserInput] = useState('');\n    const [dialogueComplete, setDialogueComplete] = useState(false);\n\n    useEffect(() => {\n        // 添加初始欢迎消息\n        setMessages([{\n            type: 'assistant',\n            content: '你好！我是你的智能会议助手。我可以帮你：\\n1. 安排新的会议\\n2. 修改已有会议\\n3. 查询会议信息\\n请告诉我你需要什么帮助？'\n        }]);\n    }, []);\n\n    const sendMessage = async () => {\n        if (!userInput.trim()) return;\n\n        try {\n            // 添加用户消息\n            setMessages(prev => [...prev, {\n                type: 'user',\n                content: userInput\n            }]);\n\n            // 发送请求到后端\n            const response = await axios.post('/chat', {\n                message: userInput,\n                type: 'user_initiated'\n            });\n\n            if (response.data.status === 'success') {\n                // 添加助手回复\n                setMessages(prev => [...prev, {\n                    type: 'assistant',\n                    content: response.data.response\n                }]);\n\n                // 如果对话完成，通知父组件\n                if (response.data.dialogue_complete) {\n                    setDialogueComplete(true);\n                    onDialogComplete(response.data.summary);\n                }\n            }\n\n            setUserInput('');\n        } catch (error) {\n            console.error('发送消息失败:', error);\n            setMessages(prev => [...prev, {\n                type: 'system',\n                content: '抱歉，发生了错误。'\n            }]);\n        }\n    };\n\n    return (\n        <Card className=\"chat-dialog-container\">\n            <div className=\"chat-messages\">\n                {messages.map((msg, index) => (\n                    <div key={index} className={`message ${msg.type}`}>\n                        {msg.content}\n                    </div>\n                ))}\n            </div>\n            <div className=\"input-area\">\n                <Input\n                    value={userInput}\n                    onChange={(e) => setUserInput(e.target.value)}\n                    onPressEnter={sendMessage}\n                    placeholder=\"请输入您的消息...\"\n                    disabled={dialogueComplete}\n                />\n                <Button \n                    type=\"primary\" \n                    onClick={sendMessage}\n                    disabled={dialogueComplete}\n                >\n                    发送\n                </Button>\n            </div>\n        </Card>\n    );\n}\n\nexport default ChatDialog; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}